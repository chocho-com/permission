{"version":3,"sources":["webpack:///src/pages/sysControl/roleManage/components/roleOptionDialog.vue","webpack:///./src/pages/sysControl/roleManage/components/roleOptionDialog.vue?16c4","webpack:///./src/pages/sysControl/roleManage/components/roleOptionDialog.vue"],"names":["roleOptionDialog","props","visible","Boolean","editData","Array","data","form","rolename","rolestatus","roledescription","roleremarks","show","loading","options","rules","roleName","required","message","trigger","authTree","checkedCases","roleModules","roleCases","moduleCaseMap","parentModuleMap","checkedList","checkVisable","isCheckAll","mounted","this","fetchAllAuth","methods","onSubmit","_this","asyncToGenerator_default","regenerator_default","a","mark","_callee","res","permission","item","subItem","wrap","_context","prev","next","console","log","isChecked","push","child","includes","modules","join","roleid","$api","post","autoAlert","returnAll","sent","put","extends_default","$openMsg","code","$emit","t0","$message","error","stop","onChange","_this2","map","moduleID","$nextTick","onChangeSub","_this3","checkAll","_this4","clearAllCheckedCases","i","j","_this5","_callee2","_context2","get","msg","forEach","watch","handler","_this6","_callee3","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_iterator","_step","module","_context3","length","undefined","get_iterator_default","done","value","return","finish","immediate","components_roleOptionDialog","render","_vm","_h","$createElement","_c","_self","attrs","before-close","fullscreen","on","update:visible","$event","directives","name","rawName","expression","element-loading-text","element-loading-spinner","header","shadow","ref","label-position","model","label-width","inline","gutter","span","label","prop","staticStyle","width","callback","$$v","$set","_v","active-value","inactive-value","active-text","type","justify","plain","click","_l","index","key","staticClass","border","status","class","colspan","margin-left","white-space","change","_s","moduleName","_e","childitem","childindex","margin-top","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/7.cb8319f8996949339a2d.js","sourcesContent":["<template>\n  <el-dialog :visible.sync=\"visible\" :before-close=\"function(){$emit('closeDialog')}\" fullscreen>\n    <el-card\n      v-loading=\"loading\"\n      element-loading-text=\"拼命加载中\"\n      element-loading-spinner=\"el-icon-loading\"\n      :header=\"(form.roleid?'编辑':'新增')+'角色'\"\n      shadow=\"always\"\n    >\n      <el-form\n        v-if=\"show\"\n        label-position=\"top\"\n        v-loading=\"loading\"\n        ref=\"form\"\n        :model=\"form\"\n        label-width=\"100px\"\n        inline\n      >\n        <el-row :gutter=\"20\">\n          <el-col :span=\"12\">\n            <el-form-item label=\"角色名:\" prop=\"roleName\">\n              <el-input style=\"width: 400px;\" v-model=\"form.rolename\"></el-input>\n            </el-form-item>\n          </el-col>\n          <el-col :span=\"12\">\n            <el-form-item label=\"角色状态:\" prop=\"roleName\">\n              <el-switch\n                v-model=\"form.rolestatus\"\n                active-value=\"1\"\n                inactive-value=\"0\"\n                active-text=\"启用\"\n              ></el-switch>\n            </el-form-item>\n          </el-col>\n        </el-row>\n        <el-row type=\"flex\" justify=\"center\">\n          <el-form-item label=\"角色权限:\">\n            <el-button type=\"primary\" plain @click=\"checkAll\">全选</el-button>\n            <table\n              style=\"width:60%\"\n              class=\"gridtable\"\n              :key=\"index\"\n              v-for=\"(item,index) in authTree\"\n              border=\"1\"\n            >\n              <tr>\n                <th\n                  v-if=\"item.status == 1\"\n                  :class=\"checkedCases[item.moduleID].isChecked ? 'blue': ''\"\n                  :colspan=\"item.child?item.child.length:0\"\n                >\n                  <el-checkbox\n                    @change=\"onChange($event, item)\"\n                    v-model=\"checkedCases[item.moduleID].isChecked\"\n                    style=\"margin-left: 0px;white-space: normal;\"\n                    :label=\"item.moduleID\"\n                  >{{item.moduleName}}</el-checkbox>\n                </th>\n              </tr>\n              <tr>\n                <td\n                  v-for=\"(childitem,childindex) in item.child\"\n                  :key=\"childindex\"\n                  :class=\"checkedCases[item.moduleID]['child'][childitem.moduleID].isChecked ? 'blue': ''\"\n                >\n                  <el-checkbox\n                    v-if=\"checkVisable && childitem.status == 1\"\n                    v-model=\"checkedCases[item.moduleID]['child'][childitem.moduleID].isChecked\"\n                    style=\"margin-left: 0px;white-space: normal;\"\n                    @change=\"onChangeSub($event, childitem.moduleID, item.moduleID)\"\n                    :label=\"childitem.moduleID\"\n                  >{{childitem.moduleName}}</el-checkbox>\n                </td>\n              </tr>\n            </table>\n          </el-form-item>\n        </el-row>\n      </el-form>\n      <el-row type=\"flex\" justify=\"center\" style=\"margin-top: 50px\">\n        <el-col :span=\"4\">\n          <el-button @click=\"$emit('closeDialog')\">取消</el-button>\n          <el-button\n            type=\"primary\"\n            @click=\"onSubmit\"\n            plain\n          >{{ form.roleid !== \"\" ? '确认编辑' : '确认添加' }}</el-button>\n        </el-col>\n      </el-row>\n    </el-card>\n  </el-dialog>\n</template>\n\n<script>\nexport default {\n  props: {\n    visible: Boolean,\n    editData: Array\n  },\n  data() {\n    return {\n      form: {\n        rolename: \"\",\n        rolestatus: \"\",\n        roledescription: \"\",\n        roleremarks: \"\"\n      },\n      show: true,\n      loading: false,\n      options: [],\n      rules: {\n        roleName: [{ required: true, message: \"请输入角色名\", trigger: \"blur\" }]\n      },\n      authTree: [],\n      checkedCases: {},\n      roleModules: [],\n      roleCases: [],\n      moduleCaseMap: {},\n      parentModuleMap: {},\n      checkedList: [],\n      checkVisable: true,\n      isCheckAll: false\n    };\n  },\n  mounted() {\n    this.fetchAllAuth();\n  },\n  methods: {\n    async onSubmit() {\n      try {\n        let res = null;\n        let data = this.form;\n        let permission = [];\n        console.log(this.checkedCases);\n        //debugger;\n        for (let item in this.checkedCases) {\n          this.checkedCases[item].isChecked ? permission.push(item) : \"\";\n          for (let subItem in this.checkedCases[item].child) {\n            if (this.checkedCases[item].child[subItem].isChecked) {\n              permission.push(subItem);\n              if (this.checkedCases[item].isChecked === false && !permission.includes(item)) {\n                permission.push(item);\n              }\n            }\n          }\n        }\n        //console.log(permission);\n        //debugger;\n        let form = {\n          rolename: this.form.rolename,\n          rolestatus: this.form.rolestatus,\n          modules: permission.join(\",\")\n        };\n        //console.log(form);\n        this.form.roleid === \"\"\n          ? (res = await this.$api.post(\n              `http://47.107.120.160:8081//role`,\n              form,\n              { autoAlert: false, returnAll: true }\n            )) //新增\n          : (res = await this.$api.put(\n              `http://47.107.120.160:8081//role`,\n              { ...form, roleid: this.form.roleid },\n              { autoAlert: false, returnAll: true }\n            ));\n        this.$openMsg(res);\n        if (res.code == 200) {\n          this.$emit(\"closeDialog\");\n        } else throw \"fail\";\n      } catch (e) {\n        this.$message.error(\"操作失败\");\n        console.log(e);\n      }\n    },\n    onChange(data, item) {\n      item.child.map(subItem => {\n        // if (data) !this.checkedCases[item.moduleID].child[subItem.moduleID] ? this.checkedCases[subItem.moduleID] = true : '';\n        // else this.checkedCases[subItem.moduleID] = false;\n        this.checkedCases[item.moduleID].child[\n          subItem.moduleID\n        ].isChecked = data;\n        this.checkVisable = false;\n        this.$nextTick(() => {\n          this.checkVisable = true;\n        });\n      });\n    },\n    onChangeSub() {\n      this.checkVisable = false;\n      this.$nextTick(() => {\n        this.checkVisable = true;\n      });\n    },\n    checkAll() {\n      this.isCheckAll = !this.isCheckAll;\n      for (let item in this.checkedCases) {\n        this.checkedCases[item].isChecked = this.isCheckAll;\n        for (let subItem in this.checkedCases[item].child) {\n          this.checkedCases[item].child[subItem].isChecked = this.isCheckAll;\n        }\n      }\n      this.checkVisable = false;\n      this.$nextTick(() => {\n        this.checkVisable = true;\n      });\n    },\n    clearAllCheckedCases() {\n      for (let i in this.checkedCases) {\n        this.checkedCases[i].isChecked = false;\n        for (let j in this.checkedCases[i][\"child\"]) {\n          this.checkedCases[i][\"child\"][j];\n          this.checkedCases[i][\"child\"][j].isChecked = false;\n        }\n      }\n    },\n    async fetchAllAuth() {\n      try {\n        const res = await this.$api.get(\n          //获取权限树\n          `/module`,\n          {},\n          { autoAlert: false, returnAll: true }\n        );\n        this.authTree = res.data.msg;\n        this.authTree.forEach(item => {\n          this.checkedCases[item.moduleID] = {\n            isChecked: false,\n            child: {}\n          };\n          item.child.forEach(subItem => {\n            this.checkedCases[item.moduleID].child[subItem.moduleID] = {\n              isChecked: false,\n              child: {}\n            };\n          });\n        });\n        //console.log(this.checkedCases);\n      } catch (e) {\n        console.log(e);\n      }\n    }\n  },\n  watch: {\n    visible: {\n      async handler(data) {\n        //console.log(this.editData);\n        this.clearAllCheckedCases();\n        if (data && this.editData.length !== 0) {\n          for (let module of this.editData[0].modules) {\n            //勾选对应的选项\n            try {\n              if (this.checkedCases[module] != undefined) {\n                //判断是否是父模块\n                // this.checkedCases[module].isChecked = true;\n              } else {\n                //不是的话遍历勾选子模块\n                for (let item in this.checkedCases) {\n                  if (\n                    this.checkedCases[item][\"child\"] != undefined && //判断是否有子模块\n                    this.checkedCases[item][\"child\"][module] != undefined //如果有子模块，看是否拥有对应模块\n                  ) {\n                    this.checkedCases[item][\"child\"][module].isChecked = true;\n                  }\n                }\n              }\n            } catch (error) {\n              console.log(error);\n            }\n          }\n          this.form.rolename = this.editData[0].rolename;\n          this.form.rolestatus = this.editData[0].rolestatus;\n          this.form.roleid = this.editData[0].roleid;\n        }\n        this.show = false;\n        this.$nextTick(() => {\n          this.show = true;\n        });\n      },\n      immediate: false\n    }\n  }\n  // created() {\n  //   this.fetchAllAuth();\n  // }\n};\n</script>\n\n<style scoped lang=\"stylus\">\n.gridtable {\n  font-family: verdana, arial, sans-serif;\n  font-size: 11px;\n  color: #333333;\n  border-width: 1px;\n  border-color: #ebeef5;\n  border-collapse: collapse;\n  table-layout: fixed;\n  margin-top: 10px;\n\n  th {\n    border-width: 1px;\n    padding: 8px;\n    border-style: solid;\n    border-color: #ebeef5;\n  }\n\n  td {\n    border-width: 1px;\n    padding: 8px;\n    border-style: solid;\n    border-color: #ebeef5;\n    background-color: #ffffff;\n  }\n}\n\n.blue {\n  background-color: #bbe1fa;\n}\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/pages/sysControl/roleManage/components/roleOptionDialog.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('el-dialog',{attrs:{\"visible\":_vm.visible,\"before-close\":function(){_vm.$emit('closeDialog')},\"fullscreen\":\"\"},on:{\"update:visible\":function($event){_vm.visible=$event}}},[_c('el-card',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.loading),expression:\"loading\"}],attrs:{\"element-loading-text\":\"拼命加载中\",\"element-loading-spinner\":\"el-icon-loading\",\"header\":(_vm.form.roleid?'编辑':'新增')+'角色',\"shadow\":\"always\"}},[(_vm.show)?_c('el-form',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.loading),expression:\"loading\"}],ref:\"form\",attrs:{\"label-position\":\"top\",\"model\":_vm.form,\"label-width\":\"100px\",\"inline\":\"\"}},[_c('el-row',{attrs:{\"gutter\":20}},[_c('el-col',{attrs:{\"span\":12}},[_c('el-form-item',{attrs:{\"label\":\"角色名:\",\"prop\":\"roleName\"}},[_c('el-input',{staticStyle:{\"width\":\"400px\"},model:{value:(_vm.form.rolename),callback:function ($$v) {_vm.$set(_vm.form, \"rolename\", $$v)},expression:\"form.rolename\"}})],1)],1),_vm._v(\" \"),_c('el-col',{attrs:{\"span\":12}},[_c('el-form-item',{attrs:{\"label\":\"角色状态:\",\"prop\":\"roleName\"}},[_c('el-switch',{attrs:{\"active-value\":\"1\",\"inactive-value\":\"0\",\"active-text\":\"启用\"},model:{value:(_vm.form.rolestatus),callback:function ($$v) {_vm.$set(_vm.form, \"rolestatus\", $$v)},expression:\"form.rolestatus\"}})],1)],1)],1),_vm._v(\" \"),_c('el-row',{attrs:{\"type\":\"flex\",\"justify\":\"center\"}},[_c('el-form-item',{attrs:{\"label\":\"角色权限:\"}},[_c('el-button',{attrs:{\"type\":\"primary\",\"plain\":\"\"},on:{\"click\":_vm.checkAll}},[_vm._v(\"全选\")]),_vm._v(\" \"),_vm._l((_vm.authTree),function(item,index){return _c('table',{key:index,staticClass:\"gridtable\",staticStyle:{\"width\":\"60%\"},attrs:{\"border\":\"1\"}},[_c('tr',[(item.status == 1)?_c('th',{class:_vm.checkedCases[item.moduleID].isChecked ? 'blue': '',attrs:{\"colspan\":item.child?item.child.length:0}},[_c('el-checkbox',{staticStyle:{\"margin-left\":\"0px\",\"white-space\":\"normal\"},attrs:{\"label\":item.moduleID},on:{\"change\":function($event){return _vm.onChange($event, item)}},model:{value:(_vm.checkedCases[item.moduleID].isChecked),callback:function ($$v) {_vm.$set(_vm.checkedCases[item.moduleID], \"isChecked\", $$v)},expression:\"checkedCases[item.moduleID].isChecked\"}},[_vm._v(_vm._s(item.moduleName))])],1):_vm._e()]),_vm._v(\" \"),_c('tr',_vm._l((item.child),function(childitem,childindex){return _c('td',{key:childindex,class:_vm.checkedCases[item.moduleID]['child'][childitem.moduleID].isChecked ? 'blue': ''},[(_vm.checkVisable && childitem.status == 1)?_c('el-checkbox',{staticStyle:{\"margin-left\":\"0px\",\"white-space\":\"normal\"},attrs:{\"label\":childitem.moduleID},on:{\"change\":function($event){return _vm.onChangeSub($event, childitem.moduleID, item.moduleID)}},model:{value:(_vm.checkedCases[item.moduleID]['child'][childitem.moduleID].isChecked),callback:function ($$v) {_vm.$set(_vm.checkedCases[item.moduleID]['child'][childitem.moduleID], \"isChecked\", $$v)},expression:\"checkedCases[item.moduleID]['child'][childitem.moduleID].isChecked\"}},[_vm._v(_vm._s(childitem.moduleName))]):_vm._e()],1)}),0)])})],2)],1)],1):_vm._e(),_vm._v(\" \"),_c('el-row',{staticStyle:{\"margin-top\":\"50px\"},attrs:{\"type\":\"flex\",\"justify\":\"center\"}},[_c('el-col',{attrs:{\"span\":4}},[_c('el-button',{on:{\"click\":function($event){return _vm.$emit('closeDialog')}}},[_vm._v(\"取消\")]),_vm._v(\" \"),_c('el-button',{attrs:{\"type\":\"primary\",\"plain\":\"\"},on:{\"click\":_vm.onSubmit}},[_vm._v(_vm._s(_vm.form.roleid !== \"\" ? '确认编辑' : '确认添加'))])],1)],1)],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-0c525258\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/pages/sysControl/roleManage/components/roleOptionDialog.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true,\\\"publicPath\\\":\\\"../../\\\"}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-0c525258\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!stylus-loader?{\\\"sourceMap\\\":true}!../../../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./roleOptionDialog.vue\")\n}\nvar normalizeComponent = require(\"!../../../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./roleOptionDialog.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./roleOptionDialog.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-0c525258\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../../node_modules/vue-loader/lib/selector?type=template&index=0!./roleOptionDialog.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-0c525258\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/pages/sysControl/roleManage/components/roleOptionDialog.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}